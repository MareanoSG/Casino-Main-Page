<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack</title>
    <link rel="stylesheet" href="CSS/blackjack.css">
    <script src="JS/blackjack.js"></script>
</head>

<body>
    <div class="contienepuntos">
        <div class="puntos">
            <h3 id="ptstotales__text">Puntos: CARGANDO...</h3>
        </div>
    </div>
    <div id="final">
        <div class="puntos2">
            <p id="puntos2"></p>
        </div>
        <div class="finJuego">
            <h1 id="mensajeFin"></h1>
            <button id="playAgain" onclick="volveraempezar();">JUGAR DE NUEVO</button>
        </div>
        <div class="puntos1">
            <p id="puntos1"></p>
        </div>
    </div>
    <button onclick="openModal()" class="modal-open">
        <div><img src="tablero/Coin.png" alt="coin-img" draggable="false">
        </div>
    </button>
    <button onclick="openBet()" class="open-bet modal-open">
        <div><img src="tablero/Coin-bet.png" alt="coin-img" draggable="false">
        </div>
    </button>

    <div id="myModal" class="modal">
        <img src="tablero/modal-img.png" alt="modal-background-img">
        <span onclick="closeModal()" class="close">X</span>
        <div class="modal-content" draggable="false">
            <p>El objetivo es alcanzar una puntuación cercana a 21 puntos sin excederla. La competencia se establece
                entre ambos, y el ganador será aquel que logre una puntuación más próxima a 21 sin pasarse. En caso de
                empate en la puntuación, ambos pierden</p>
        </div>
    </div>

    <div id="myBetModal" class="modal">
        <img src="tablero/modal-img.png" alt="modal-background-img">
        <span onclick="closeBet()" class="close">X</span>
        <div class="modal-content" draggable="false">
            <label for="bet-input">Apuesta</label>
            <input type="number" name="bet-input" class="bet-input" id="bet-input" placeholder="000" value="1" min="1">
        </div>
    </div>

    <div class="buuton-back">
        <a href="../../index.html" class="modal-open-2">
            <div><img src="./cards/Coin-back.png" alt="" draggable="false"></div>
        </a>
    </div>

    <script>
        // Función para abrir el modal
        function openModal() {
            document.getElementById("myModal").style.display = "flex";
            document.getElementById("myModal").classList.add("modal-active");
        }

        // Función para cerrar el modal
        function closeModal() {
            document.getElementById("myModal").style.display = "none";
            document.getElementById("myModal").classList.remove("modal-active");
        }

        function openBet() {
            if(!canBet){
                alert("Ya no puedes apostar");
                return;
            }
            document.getElementById("myBetModal").style.display = "flex";
            document.getElementById("myBetModal").classList.add("modal-active");
        }

        // Función para cerrar el modal
        async function closeBet() {
            if (parseInt(document.getElementById("bet-input").value) > parseInt(await getUserPoints(user.id))) {
                alert("No puedes apostar tanto");
                return;
            }
            document.getElementById("myBetModal").style.display = "none";
            document.getElementById("myBetModal").classList.remove("modal-active");
        }
    </script>

    <h2 class="sol1">Computadora: <span id="dealer-sum"></span></h2>

    <div id="dealer-cards">
        <img id="hidden" src="./cards/BACK.png">
    </div>

    <h2 class="sol2"> Tú <span id="your-sum"></span></h2>
    <div id="your-cards"></div>
    <br>
    <button id="hit">Quiero</button>
    <button id="stay">Paro</button>
    <p id="results"></p>


    <script> function volveraempezar() {
            location.reload();
        }
    </script>
</body>

</html>
